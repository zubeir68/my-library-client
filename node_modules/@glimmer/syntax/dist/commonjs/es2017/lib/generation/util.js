'use strict';

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.escapeAttrValue = escapeAttrValue;
exports.escapeText = escapeText;
const ATTR_VALUE_REGEX_TEST = /[\xA0"&]/;
const ATTR_VALUE_REGEX_REPLACE = new RegExp(ATTR_VALUE_REGEX_TEST.source, 'g');
const TEXT_REGEX_TEST = /[\xA0&<>]/;
const TEXT_REGEX_REPLACE = new RegExp(TEXT_REGEX_TEST.source, 'g');
function attrValueReplacer(char) {
    switch (char.charCodeAt(0)) {
        case 160 /* NBSP */:
            return '&nbsp;';
        case 34 /* QUOT */:
            return '&quot;';
        case 38 /* AMP */:
            return '&amp;';
        default:
            return char;
    }
}
function textReplacer(char) {
    switch (char.charCodeAt(0)) {
        case 160 /* NBSP */:
            return '&nbsp;';
        case 38 /* AMP */:
            return '&amp;';
        case 60 /* LT */:
            return '&lt;';
        case 62 /* GT */:
            return '&gt;';
        default:
            return char;
    }
}
function escapeAttrValue(attrValue) {
    if (ATTR_VALUE_REGEX_TEST.test(attrValue)) {
        return attrValue.replace(ATTR_VALUE_REGEX_REPLACE, attrValueReplacer);
    }
    return attrValue;
}
function escapeText(text) {
    if (TEXT_REGEX_TEST.test(text)) {
        return text.replace(TEXT_REGEX_REPLACE, textReplacer);
    }
    return text;
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidXRpbC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3BhY2thZ2VzL0BnbGltbWVyL3N5bnRheC9saWIvZ2VuZXJhdGlvbi91dGlsLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFRQSxNQUFNLEFBQXFCLHdCQUFHLEFBQVUsQUFBQztBQUN6QyxNQUFNLEFBQXdCLDJCQUFHLElBQUksQUFBTSxPQUFDLEFBQXFCLHNCQUFDLEFBQU0sUUFBRSxBQUFHLEFBQUMsQUFBQztBQUUvRSxNQUFNLEFBQWUsa0JBQUcsQUFBVyxBQUFDO0FBQ3BDLE1BQU0sQUFBa0IscUJBQUcsSUFBSSxBQUFNLE9BQUMsQUFBZSxnQkFBQyxBQUFNLFFBQUUsQUFBRyxBQUFDLEFBQUM7QUFFbkUsMkJBQTJCLEFBQVksTUFDckM7WUFBUSxBQUFJLEtBQUMsQUFBVSxXQUFDLEFBQUMsQUFBQyxBQUFFLEFBQzFCO2lCQUNFO21CQUFPLEFBQVEsQUFBQyxBQUNsQjtnQkFDRTttQkFBTyxBQUFRLEFBQUMsQUFDbEI7Z0JBQ0U7bUJBQU8sQUFBTyxBQUFDLEFBQ2pCO0FBQ0U7bUJBQU8sQUFBSSxBQUFDLEFBQ2YsQUFDSCxBQUFDOzs7QUFFRCxzQkFBc0IsQUFBWSxNQUNoQztZQUFRLEFBQUksS0FBQyxBQUFVLFdBQUMsQUFBQyxBQUFDLEFBQUUsQUFDMUI7aUJBQ0U7bUJBQU8sQUFBUSxBQUFDLEFBQ2xCO2dCQUNFO21CQUFPLEFBQU8sQUFBQyxBQUNqQjtnQkFDRTttQkFBTyxBQUFNLEFBQUMsQUFDaEI7Z0JBQ0U7bUJBQU8sQUFBTSxBQUFDLEFBQ2hCO0FBQ0U7bUJBQU8sQUFBSSxBQUFDLEFBQ2YsQUFDSCxBQUFDOztBQUVELEFBQU07eUJBQTBCLEFBQWlCLFdBQy9DO1FBQUksQUFBcUIsc0JBQUMsQUFBSSxLQUFDLEFBQVMsQUFBQyxZQUFFLEFBQ3pDO2VBQU8sQUFBUyxVQUFDLEFBQU8sUUFBQyxBQUF3QiwwQkFBRSxBQUFpQixBQUFDLEFBQUMsQUFDdkU7QUFDRDtXQUFPLEFBQVMsQUFBQyxBQUNuQixBQUFDO0FBRUQsQUFBTTtvQkFBcUIsQUFBWSxNQUNyQztRQUFJLEFBQWUsZ0JBQUMsQUFBSSxLQUFDLEFBQUksQUFBQyxPQUFFLEFBQzlCO2VBQU8sQUFBSSxLQUFDLEFBQU8sUUFBQyxBQUFrQixvQkFBRSxBQUFZLEFBQUMsQUFBQyxBQUN2RDtBQUNEO1dBQU8sQUFBSSxBQUFDLEFBQ2QsQUFBQyIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGVudW0gQ2hhciB7XG4gIE5CU1AgPSAweGEwLFxuICBRVU9UID0gMHgyMixcbiAgTFQgPSAweDNjLFxuICBHVCA9IDB4M2UsXG4gIEFNUCA9IDB4MjYsXG59XG5cbmNvbnN0IEFUVFJfVkFMVUVfUkVHRVhfVEVTVCA9IC9bXFx4QTBcIiZdLztcbmNvbnN0IEFUVFJfVkFMVUVfUkVHRVhfUkVQTEFDRSA9IG5ldyBSZWdFeHAoQVRUUl9WQUxVRV9SRUdFWF9URVNULnNvdXJjZSwgJ2cnKTtcblxuY29uc3QgVEVYVF9SRUdFWF9URVNUID0gL1tcXHhBMCY8Pl0vO1xuY29uc3QgVEVYVF9SRUdFWF9SRVBMQUNFID0gbmV3IFJlZ0V4cChURVhUX1JFR0VYX1RFU1Quc291cmNlLCAnZycpO1xuXG5mdW5jdGlvbiBhdHRyVmFsdWVSZXBsYWNlcihjaGFyOiBzdHJpbmcpIHtcbiAgc3dpdGNoIChjaGFyLmNoYXJDb2RlQXQoMCkpIHtcbiAgICBjYXNlIENoYXIuTkJTUDpcbiAgICAgIHJldHVybiAnJm5ic3A7JztcbiAgICBjYXNlIENoYXIuUVVPVDpcbiAgICAgIHJldHVybiAnJnF1b3Q7JztcbiAgICBjYXNlIENoYXIuQU1QOlxuICAgICAgcmV0dXJuICcmYW1wOyc7XG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiBjaGFyO1xuICB9XG59XG5cbmZ1bmN0aW9uIHRleHRSZXBsYWNlcihjaGFyOiBzdHJpbmcpIHtcbiAgc3dpdGNoIChjaGFyLmNoYXJDb2RlQXQoMCkpIHtcbiAgICBjYXNlIENoYXIuTkJTUDpcbiAgICAgIHJldHVybiAnJm5ic3A7JztcbiAgICBjYXNlIENoYXIuQU1QOlxuICAgICAgcmV0dXJuICcmYW1wOyc7XG4gICAgY2FzZSBDaGFyLkxUOlxuICAgICAgcmV0dXJuICcmbHQ7JztcbiAgICBjYXNlIENoYXIuR1Q6XG4gICAgICByZXR1cm4gJyZndDsnO1xuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gY2hhcjtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZXNjYXBlQXR0clZhbHVlKGF0dHJWYWx1ZTogc3RyaW5nKSB7XG4gIGlmIChBVFRSX1ZBTFVFX1JFR0VYX1RFU1QudGVzdChhdHRyVmFsdWUpKSB7XG4gICAgcmV0dXJuIGF0dHJWYWx1ZS5yZXBsYWNlKEFUVFJfVkFMVUVfUkVHRVhfUkVQTEFDRSwgYXR0clZhbHVlUmVwbGFjZXIpO1xuICB9XG4gIHJldHVybiBhdHRyVmFsdWU7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBlc2NhcGVUZXh0KHRleHQ6IHN0cmluZykge1xuICBpZiAoVEVYVF9SRUdFWF9URVNULnRlc3QodGV4dCkpIHtcbiAgICByZXR1cm4gdGV4dC5yZXBsYWNlKFRFWFRfUkVHRVhfUkVQTEFDRSwgdGV4dFJlcGxhY2VyKTtcbiAgfVxuICByZXR1cm4gdGV4dDtcbn1cbiJdfQ==